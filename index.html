<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Notes App</title>
  <!-- Link to normal CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Sticky Note App</h2>
  <div id="notes"></div>

 <script>
    const notesContainer = document.getElementById("notes");

    function rowsForViewport() {
      const w = window.innerWidth;
      if (w <= 480) return 1;      // mobile
      if (w <= 768) return 2;      // tablet
      return 3;                    // desktop
    }

    function applyRowsTo(textarea) {
      textarea.rows = rowsForViewport();
    }

    function applyRowsToAll() {
      document.querySelectorAll("#notes textarea").forEach(applyRowsTo);
    }

    window.addEventListener("resize", applyRowsToAll);

    function createNote(content = "") {
      const noteDiv = document.createElement("div");
      noteDiv.className = "note-container";

      const textarea = document.createElement("textarea");
      textarea.value = content;
      applyRowsTo(textarea);

      // + button always visible
      const addBtn = document.createElement("button");
      addBtn.textContent = "+";
      addBtn.className = "add-btn";
      addBtn.onclick = () => {
        createNote();
        saveAllNotes();
      };

      // Buttons (hidden until hover)
      const btnContainer = document.createElement("div");
      btnContainer.className = "buttons";

      const saveBtn = document.createElement("button");
      saveBtn.textContent = "Save";
      saveBtn.className = "save-btn";
      saveBtn.onclick = () => {
        saveAllNotes();
        alert("Note saved!");
      };

      const deleteBtn = document.createElement("button");
      deleteBtn.textContent = "Delete";
      deleteBtn.className = "delete-btn";
      deleteBtn.onclick = () => {
        noteDiv.remove();
        saveAllNotes();
      };

      const editBtn = document.createElement("button");
      editBtn.textContent = "Edit";
      editBtn.className = "edit-btn";
      editBtn.onclick = () => {
        textarea.disabled = !textarea.disabled;
        editBtn.textContent = textarea.disabled ? "Enable" : "Edit";
      };

      // Order: Save | Delete | Edit
      btnContainer.append(saveBtn, deleteBtn, editBtn);

      noteDiv.append(textarea, addBtn, btnContainer);
      notesContainer.appendChild(noteDiv);

      textarea.addEventListener("blur", saveAllNotes);
    }

    function saveAllNotes() {
      const textareas = document.querySelectorAll("#notes textarea");
      const notes = Array.from(textareas).map(t => t.value);
      localStorage.setItem("notes", JSON.stringify(notes));
    }

    function loadNotes() {
      const saved = localStorage.getItem("notes");
      if (saved) {
        JSON.parse(saved).forEach(note => createNote(note));
      } else {
        createNote();
      }
      applyRowsToAll();
    }

    loadNotes();
  </script>
</body>
</html>